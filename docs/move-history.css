/* ============================================================================
	 MOVE HISTORY PANEL – REVAMPED
	 This stylesheet isolates styling for the move list to keep `main.css` lean.
	 Structure generated by JS:
		 <div class="move-list">
				<div class="move-pair">
					 <div class="move-number">1.</div>
					 <div class="move-notation white">e4</div>
					 <div class="move-notation black">e5</div>
				</div>
		 </div>
	 We enhance accessibility, readability, and cyber‑neon aesthetics.
	 ============================================================================ */

:root {
	/* Fallbacks in case not defined (should already exist in main.css) */
	--mh-bg: rgba(10,15,25,0.55);
	--mh-row-alt: rgba(0,255,255,0.05);
	--mh-row-hover: rgba(0,255,255,0.08);
	--mh-row-active: rgba(255,0,128,0.20);
	--mh-border: rgba(0,255,255,0.25);
	--mh-scroll-track: rgba(0,255,255,0.08);
	--mh-scroll-thumb: linear-gradient(180deg,var(--neon-cyan),var(--neon-purple));
}

.move-history-card {
	display: flex;
	flex-direction: column;
	gap: var(--space-md, 0.75rem);
	position: relative;
}

.move-history-card h3 {
	letter-spacing: 0.15em;
	font-weight: 900;
	font-size: var(--font-size-lg, 1.125rem);
}

/* Scroll Container */
.move-list {
	flex: 1 1 auto;
	overflow-y: auto;
	padding: var(--space-sm, 0.5rem) var(--space-sm, 0.5rem) var(--space-md, 0.75rem);
	display: flex;
	flex-direction: column;
	gap: 2px; /* micro gap for subtle separation */
	scrollbar-gutter: stable both-edges;
	background: var(--mh-bg);
	border: 1px solid var(--mh-border);
	border-radius: var(--border-radius-sm, 6px);
	position: relative;
	backdrop-filter: blur(6px) saturate(140%);
	-webkit-backdrop-filter: blur(6px) saturate(140%);
	animation: fadeIn 0.4s ease both;
}

/* Custom Scrollbar (WebKit / Chromium) */
.move-list::-webkit-scrollbar { width: 10px; }
.move-list::-webkit-scrollbar-track { background: var(--mh-scroll-track); border-radius: 8px; }
.move-list::-webkit-scrollbar-thumb { 
	background: var(--mh-scroll-thumb);
	border-radius: 8px; 
	border: 2px solid rgba(0,0,0,0.4);
	box-shadow: 0 0 6px rgba(0,255,255,0.4);
}
.move-list::-webkit-scrollbar-thumb:hover { filter: brightness(1.2); }

/* Firefox scrollbar */
.move-list { scrollbar-width: thin; scrollbar-color: var(--neon-cyan) var(--mh-scroll-track); }

/* Row Layout */
.move-pair {
	--row-pad-y: 4px;
	--row-pad-x: 8px;
	display: grid;
	grid-template-columns: 44px 1fr 1fr;
	align-items: center;
	gap: 4px;
	font-family: var(--font-secondary);
	font-size: var(--font-size-sm, 0.875rem);
	letter-spacing: 0.04em;
	padding: var(--row-pad-y) var(--row-pad-x);
	line-height: 1.25;
	position: relative;
	border-radius: 6px;
	background: linear-gradient(135deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
	border: 1px solid rgba(255,255,255,0.04);
	transition: background var(--transition-fast, 0.15s) ease, transform 0.15s ease, border-color 0.3s;
	cursor: default;
	isolation: isolate; /* ensures pseudo elements don't bleed */
}

.move-pair:nth-child(odd) { background: linear-gradient(135deg, var(--mh-row-alt), rgba(255,255,255,0.02)); }
.move-pair:nth-child(even) { background: linear-gradient(135deg, rgba(255,255,255,0.015), rgba(0,0,0,0.25)); }

.move-pair:hover {
	background: linear-gradient(135deg, var(--mh-row-hover), rgba(255,255,255,0.06));
	transform: translateX(2px);
	border-color: var(--neon-cyan);
	box-shadow: 0 0 6px rgba(0,255,255,0.35), inset 0 0 12px rgba(0,255,255,0.08);
}

/* Active / latest move highlight (JS can also add .current-move) */
.move-pair.current-move,
.move-pair:last-child {
	border-color: var(--neon-pink);
	background: linear-gradient(135deg, var(--mh-row-active), rgba(255,0,128,0.08));
	box-shadow: 0 0 10px rgba(255,0,128,0.4), 0 0 18px rgba(255,0,128,0.2);
}

.move-pair.current-move::after {
	content: '';
	position: absolute;
	left: 0;
	top: 0; bottom: 0;
	width: 3px;
	background: linear-gradient(180deg,var(--neon-pink),var(--neon-purple));
	box-shadow: 0 0 8px var(--neon-pink);
	border-radius: 3px 0 0 3px;
	animation: pulseBar 2.2s ease-in-out infinite;
}

@keyframes pulseBar {
	0%,100% { filter: brightness(1); opacity: 0.9; }
	50% { filter: brightness(1.4); opacity: 1; }
}

.move-number {
	font-family: var(--font-primary);
	font-weight: 700;
	color: var(--neon-cyan);
	text-shadow: 0 0 6px var(--neon-cyan);
	justify-self: end;
	padding-right: 4px;
	opacity: 0.9;
}

.move-notation {
	font-weight: 600;
	color: var(--text-secondary, #b0b0b0);
	position: relative;
	padding: 2px 6px;
	border-radius: 4px;
	display: inline-flex;
	align-items: center;
	gap: 4px;
	min-height: 22px;
	line-height: 1.1;
	letter-spacing: 0.02em;
	transition: color var(--transition-fast,0.15s), background 0.2s;
}

.move-notation.white { color: #f5f5f5; }
.move-notation.black { color: #dddddd; }

/* Hover reveal highlight */
.move-notation:hover {
	background: rgba(0,255,255,0.12);
	color: var(--neon-cyan);
}

/* Capture marker (detect via simple SAN char 'x') – JS could add a class later */
.move-notation[data-capture="true"] {
	color: var(--neon-orange);
	text-shadow: 0 0 6px var(--neon-orange);
}

/* Check / Mate markers (JS can enhance by adding attrs/classes) */
.move-notation[data-check="true"] { color: var(--neon-yellow); }
.move-notation[data-mate="true"] { color: var(--neon-pink); font-weight: 800; }

/* Subtle animated glow for the very last half move */
.move-notation.latest {
	background: linear-gradient(135deg, rgba(0,255,255,0.15), rgba(128,0,255,0.15));
	box-shadow: 0 0 6px rgba(0,255,255,0.4), 0 0 14px rgba(128,0,255,0.25);
	animation: latestPulse 2.8s ease-in-out infinite;
}
@keyframes latestPulse {
	0%,100% { filter: brightness(1); }
	50% { filter: brightness(1.35); }
}

/* Empty placeholder state */
.move-list:empty::before {
	content: 'No moves yet';
	font-family: var(--font-primary);
	font-size: var(--font-size-sm, 0.85rem);
	color: var(--text-muted, #707070);
	position: absolute;
	top: 50%; left: 50%;
	transform: translate(-50%, -50%);
	letter-spacing: 0.15em;
	text-transform: uppercase;
	opacity: 0.6;
}

/* Responsive tweaks */
@media (max-width: 768px) {
	.move-pair { grid-template-columns: 36px 1fr 1fr; font-size: 0.75rem; }
	.move-number { font-size: 0.65rem; }
	.move-history-card { gap: var(--space-sm, 0.5rem); }
}

@media (max-width: 480px) {
	.move-pair { grid-template-columns: 32px 1fr 1fr; }
	.move-notation { padding: 2px 4px; }
}

/* Print-friendly override */
@media print {
	.move-list { background: white !important; border: 1px solid #333; }
	.move-pair { background: transparent !important; border: none; box-shadow: none; }
	.move-notation, .move-number { color: #000 !important; text-shadow: none !important; }
}

